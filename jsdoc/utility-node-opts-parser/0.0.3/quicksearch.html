<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"opts-parser.js.html":{"id":"opts-parser.js.html","title":"Source: opts-parser.js","body":" Utility: NodeJS Opts Parser Modules opts-parser Source: opts-parser.js /** * @module opts-parser * * @desc Parse the opts feeding from environment variables or arguments. Won't handle `--test-opt=&quot;value&quot;` case. */ // cache the env and argv since it unlikely to change those info on-the-fly, hopefully... const cache = {}; /** * Get the canonical option name in the arguments. * For example, when query `opt`, will return `--opt`; while query `o`, will return `-o`. * * @param {String} optName option name in `opt-name`, `--opt-name` or `-o` format * @return {String} corresponding option name in `--opt-name` or `-o` format */ export function getCanonicalOptName( optName ) { const prefixedOptReg = new RegExp( `^(?:-{1,2})(.+)$` ); if ( prefixedOptReg.test( optName ) ) { // prefixed argument found, // hence verify it directly return optName; } else if ( optName.length === 1 ) { // non-prefixed argument found, // hence verify it by appending `-` return `-${ optName }`; } // non-prefixed argument found, and the length is longer than 1, // hence verify it by appending `-` return `--${ optName }`; } /** * Get the environment variables from `process.env`. * * @return {Object} result of `process.env` */ export function getEnv( ) { if ( !cache.env ) { cache.env = process.env; } return cache.env; } /** * Get the arguments when starting the application from `process.argv`. * Filtered the `node` command and the name of script. * * @return {Array} the arguments apart from `node` command and the name of script */ export function getArgv( ) { if ( !cache.argv ) { const NODE_IDX = 0; const SCRIPT_IDX = 1; cache.argv = process.argv.filter( ( val, idx ) =&gt; { if ( idx === NODE_IDX || idx === SCRIPT_IDX ) { return false; } return true; } ); } return cache.argv; } /** * Check if the given options exist in the environment variables. * * @param {...String} opts option name(s). * @return {Map} a map of the results, in `{ optName: Boolean }` format. */ export function hasOptsInEnv( ...opts ) { const env = getEnv( ); const result = new Map( ); for ( const opt of opts ) { result.set( opt, env.hasOwnProperty( opt ) ); } return result; } /** * Check if the given options exist in the arguments to start the application. * * @param {...String} opts option name(s). * @return {Map} a map of the results, in `{ optName: Boolean }` format. */ export function hasOptsInArgv( ...opts ) { const argv = getArgv( ); const result = new Map( ); for ( const opt of opts ) { result.set( opt, argv.includes( getCanonicalOptName( opt ) ) ); } return result; } /** * Check if the given options exist in either the environment variables or the arguments to start the application. * * @param {...String} opts option name(s). * @return {Map} a map of the results, in `{ optName: Boolean }` format. */ export function hasOpts( ...opts ) { const resultInEnv = hasOptsInEnv( ...opts ); const result = hasOptsInArgv( ...opts ); for ( const entry of resultInEnv.entries( ) ) { // if entry value is true or the result is true, the final value should be true, // otherwise should be false. result.set( entry[ 0 ], entry[ 1 ] || result.get( entry[ 0 ] ) || false ); } return result; } /** * Retrieve the value of the given options exist in either the environment. * * @param {...String} opts opts option name(s). * @return {Map} a map of the results, in `{ optName: value }` format. Non-exist opts will be `null`. */ export function getOptsFromEnv( ...opts ) { const env = getEnv( ); const result = new Map( ); for ( const opt of opts ) { if ( env.hasOwnProperty( opt ) ) { result.set( opt, env[ opt ] ); } else { result.set( opt, null ); } } return result; } /** * Retrieve the value of the given options exist in the arguments to start the application. * * @param {...String} opts opts option name(s). * @return {Map} a map of the results, in `{ optName: value }` format. Non-exist opts will be `null`. */ export function getOptsFromArgv( ...opts ) { const argv = getArgv( ); const result = new Map( ); for ( const opt of opts ) { const optName = getCanonicalOptName( opt ); const nextOptIdx = argv.indexOf( optName ) + 1; if ( nextOptIdx &lt; argv.length ) { const nextOpt = argv[ nextOptIdx ]; // if the next opt is an option name // then the value of this option is null if ( getCanonicalOptName( nextOpt ) === nextOpt ) { result.set( opt, null ); } else { result.set( opt, nextOpt ); } } else { result.set( opt, null ); } } return result; } /** * Retrieve the value of the given options exist in either the environment variable or the arguments to start the application. * * @param {...String} opts opts option name(s). * @return {Map} a map of the results, in `{ optName: value }` format. Non-exist opts will be `null`. */ export function getOpts( ...opts ) { const resultFromEnv = getOptsFromEnv( ...opts ); const result = getOptsFromArgv( ...opts ); for ( const entry of resultFromEnv.entries( ) ) { const entryKey = entry[ 0 ]; const entryVal = entry[ 1 ]; const optVal = result.get( entryKey ); result.set( entryKey, optVal === null ? entryVal : optVal ); } return result; } × Search results Close "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" Utility: NodeJS Opts Parser Modules opts-parser Modules × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" Utility: NodeJS Opts Parser Modules opts-parser utility-node-opts-parser 0.0.3 utility-node-opts-parser Note that this project is still in preview stage Master Develop Parse the opts feeding from environment variables or arguments. Won't handle --test-opt=&quot;value&quot; case. Supporting NodeJS 6 and above. Basic unit test powered by Mocha/Chai/Sinon; Table of Contents Initialisation Clean Up Test Build Generate JSDoc Documentation Initialisation # Have Node ^6.0.0 &amp; NPM ^3.8.6 installed # install dependencies npm install Clean Up # remove the built code, for now only the test result npm run clean # remove the built code and node modules npm run reset Test Coverage report can be found in ./coverage folder. npm test Build The source code is written in ES2015, hence before NodeJS fully support ES2015, we need to build the code to es2015-node using Babel. The built code can be found in ./dist folder. npm run build Generate JSDoc Documentation # generate the documentation npm run doc # serve the generated documentation using `http-server` # note that no watch functionality is hooked, hence # changing code won't trigger documentation regeneration. npm run serve-doc × Search results Close "},"module-opts-parser.html":{"id":"module-opts-parser.html","title":"Module: opts-parser","body":" Utility: NodeJS Opts Parser Modules opts-parser Module: opts-parser Parse the opts feeding from environment variables or arguments. Won't handle --test-opt=&quot;value&quot; case. Source: opts-parser.js, line 1 Methods &lt;static&gt; getArgv() Get the arguments when starting the application from process.argv. Get the arguments when starting the application from process.argv. Filtered the node command and the name of script. Source: opts-parser.js, line 58 Returns: the arguments apart from node command and the name of script Type Array &lt;static&gt; getCanonicalOptName(optName) Get the canonical option name in the arguments. Get the canonical option name in the arguments. For example, when query opt, will return --opt; while query o, will return -o. Parameters: Name Type Description optName String option name in opt-name, --opt-name or -o format Source: opts-parser.js, line 17 Returns: corresponding option name in --opt-name or -o format Type String &lt;static&gt; getEnv() Get the environment variables from process.env. Get the environment variables from process.env. Source: opts-parser.js, line 44 Returns: result of process.env Type Object &lt;static&gt; getOpts(opts) Retrieve the value of the given options exist in either the environment variable or the arguments to start the application. Retrieve the value of the given options exist in either the environment variable or the arguments to start the application. Parameters: Name Type Argument Description opts String &lt;repeatable&gt; opts option name(s). Source: opts-parser.js, line 198 Returns: a map of the results, in { optName: value } format. Non-exist opts will be null. Type Map &lt;static&gt; getOptsFromArgv(opts) Retrieve the value of the given options exist in the arguments to start the application. Retrieve the value of the given options exist in the arguments to start the application. Parameters: Name Type Argument Description opts String &lt;repeatable&gt; opts option name(s). Source: opts-parser.js, line 162 Returns: a map of the results, in { optName: value } format. Non-exist opts will be null. Type Map &lt;static&gt; getOptsFromEnv(opts) Retrieve the value of the given options exist in either the environment. Retrieve the value of the given options exist in either the environment. Parameters: Name Type Argument Description opts String &lt;repeatable&gt; opts option name(s). Source: opts-parser.js, line 138 Returns: a map of the results, in { optName: value } format. Non-exist opts will be null. Type Map &lt;static&gt; hasOpts(opts) Check if the given options exist in either the environment variables or the arguments to start the application. Check if the given options exist in either the environment variables or the arguments to start the application. Parameters: Name Type Argument Description opts String &lt;repeatable&gt; option name(s). Source: opts-parser.js, line 119 Returns: a map of the results, in { optName: Boolean } format. Type Map &lt;static&gt; hasOptsInArgv(opts) Check if the given options exist in the arguments to start the application. Check if the given options exist in the arguments to start the application. Parameters: Name Type Argument Description opts String &lt;repeatable&gt; option name(s). Source: opts-parser.js, line 101 Returns: a map of the results, in { optName: Boolean } format. Type Map &lt;static&gt; hasOptsInEnv(opts) Check if the given options exist in the environment variables. Check if the given options exist in the environment variables. Parameters: Name Type Argument Description opts String &lt;repeatable&gt; option name(s). Source: opts-parser.js, line 83 Returns: a map of the results, in { optName: Boolean } format. Type Map × Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
